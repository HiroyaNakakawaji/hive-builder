====================
インベントリ
====================
hive-builder のインベントリは以下の2つからなります。

hive 定義
  サーバやネットワークで構成される基盤（infrastructure）を定義する

サービス定義
  コンテナイメージ、ボリューム、内部ネットワークで構成されるサービスを定義する

hive 定義
====================
hive 定義では基盤を構成するサーバやネットワークを記述します。

IaaS 上にサイトを構築する場合、コンテナ収容サーバは3つの Availability Zone
に分かれて配置されます。以下にその例を示します。

.. image:: imgs/infra.png
   :align: center

プロバイダ
--------------------
build-infraフェーズでは、サーバを配備する基盤のプロバイダを変数 provider に指定することで、様々なプロバイダを利用できます。プロバイダとして有効な値は以下のとおりです。

============= ===========================================
プロバイダID  説明
============= ===========================================
vagrant       Vagrant for VirtualBox on local machine
aws           Amazon Web Service
azure         Microsoft Azure（未実装）
gcp           Gooble Computing Platform
openstack     Some OpenStack Provider（未実装）
external      sshでアクセス可能なサーバ群（未実装）
============= ===========================================

hive 定義のフォーマット
---------------------------
hive 定義のフォーマットは以下の通り。

============= ================== ===============================================
パラメータ    選択肢/デフォルト  意味
============= ================== ===============================================
plugin        hive_inventory     このファイルがhive定義で有ることを示す
stages                           ステージオブジェクトへの辞書
                                 private, staging, production の3つが定義できる
============= ================== ===============================================

ステージオブジェクト
-----------------------------
ステージオブジェクトのフォーマットは以下の通り。
=================== ===================== ===============================================
パラメータ          選択肢/デフォルト/例  意味
=================== ===================== ===============================================
provider            aws                   基盤を提供するシステム
                    azure
                    gcp
                    openstack
                    prepared
                    vagrant
cidr                192.168.1.0/24        ネットワークのアドレス
number_of_hosts     デフォルト3           hiveサーバの台数
separate_repository Yes/no デフォルト Yes リポジトリサーバを hiveサーバとは別に建てるか
=================== ===================== ===============================================

.. 台数をへらす方法：リポジトリサーバの分割、1台だけで動作


(以降、未執筆)
